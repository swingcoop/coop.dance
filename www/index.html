<html>
<head>
   <title>The Swing Dance Cooperative | Olympia</title>
   <meta name="description" 
      content="The Swing Dance Cooperative. We swing dance! We're in Olympia! We're an employee-owned cooperative!">
   <meta name="keywords" content="swing dance coop co-cop cooperative olympia">
   <meta name="viewport" content="width=device-width, initial-scale=1">

   <meta property="og:title" content="The Swing Dance Cooperative | Olympia">
   <meta property="og:type" content="website">
   <meta property="og:image" content="http://swing.dance.coop/img/ograph-banner.png">
   <meta property="og:image:secure_url" content="https://swing.dance.coop/img/ograph-banner.png">
   <meta property="og:url" content="https://swing.dance.coop/">
   <meta property="og:description" 
      content="The Swing Dance Cooperative. We swing dance! We're in Olympia! We're an employee-owned cooperative!">

   <link href="https://fonts.googleapis.com/css?family=Satisfy" rel="stylesheet">
   <link href="https://cdnjs.cloudflare.com/ajax/libs/Buttons/2.0.0/css/buttons.min.css" rel="stylesheet">

   <link href="/style/main.css" rel="stylesheet">
   <style>
   .tito-ticket-description {
      display: none;
   }
   #tito-ticket-a-mdnefq-mw,
   #tito-ticket-wvqw9lmywwg {
      height: 100px;
   }
   .tito-checkbox {
      display: block;
      padding-left: 2ex;
      font-size: 3em;
      margin-top: 0.35ex;
   }

   .rsvp .agreement input {
      width: inherit;
      margin-right: 1.5ex;
   }
   .agreement {
      margin-top: 0.5em;
      margin-bottom: 1em;
   }
   .role1 {
      color: #c22;
   }
   .role2 {
      color: red;
   }
   .waitlist {
      color: #ddd;
   }
   .button-link {
      display: inline-block;
      border: solid 2px #c22;
      border-radius: 6px;
      padding: 2ex;
      min-width: 70px;
      text-align: center;
      text-decoration: none;
      margin-bottom: 1em;
   }
   a.button-link {
      color: #c22;
   }
   .rsvp a.button-link {
      color: #ffc3bb;
   }
   .proto-nav-panel {
      margin-top: 1.5em;
      margin-bottom: 1em;
      text-align: center; 
   }
   .proto-nav-panel .button-link { 
      margin-left: 1ex;
      margin-right: 1ex;
   }

   .month {
      text-align: center;
   }

   .events {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      grid-gap: 10px;
      grid-auto-rows: minmax(100px, auto);
   }
   .event {
      position: relative; 
      border: dotted 1px #c22;
      border-radius: 5px;

      display: flex;
      align-items: center;
      justify-content: center;
   }
   .feature .event {
      display: block;
      padding: 2ex;
   }
   .event.oly-dance {
      border: solid 1px pink;
   }
   .event .title {
      padding: 1ex;

     display: flex;
     align-items: center;
     flex-direction: column;
     justify-content: center;

      text-align: center;
      margin-top: 1.1em;
      margin-bottom: 1.1em;
   }
   .event .title div {
      margin-bottom: 0.4ex;
   }
   .event .details {
      position: absolute;
      bottom: 1ex;
      right: 1.2ex;
      font-size: smaller;
   }
   .message-title {
    font-weight: bold;
    font-size: larger;
    margin-bottom: 0.8em;
   }

   .event input[type="radio"] {
      display: none;
   }
   .sel {
      background-color: #c22;
   }

   .descriptions {
      border: dotted white 8px;
      padding: 2ex;
      margin-bottom: 1.3em;
   }
   .descriptions h4 {
      margin-top: 0;
   }
   </style>

<script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
<script src="https://unpkg.com/axios/dist/axios.min.js"></script>
</head>
<body>
   <div id="app">
      <div class="swing">
         <div class="column">
            <section class="section1 rsvp">
               <div class="rings">
                  <img src="./img/rings.png" class="for-phone"/>
               </div>
               <h1 class="title">The Swing Dance<span class="for-phone"> Cooperative</span></h1>

               <p>Hi. We're here to share swing dancing and host fancy dances and stuff. We're also here to be a part of the <a href="https://www.ica.coop/en/whats-co-op/co-operative-identity-values-principles">cooperative movement</a>.</p>

               <div class="proto-nav-panel">
                  <a class="button-link" href="/events">Events</a>
                  <a class="button-link" href="/mission">Mission</a>
                  <a class="button-link" href="/contact">Contact us</a>
               </div>

               <h2>Special events</h2>

               <p>Wednesday, August 14 is our Summer Evening Swing Dance, with 
                  Frog &amp; Henry, live and in person from New Orleans.</p>

               <img src="/img/frog-and-henry/banner-hunter.jpg" width="100%" />

               <div style="margin-top: 1.1em">
                  <div>Abigail Stuart House</div>
                  <div>1002 Washington St SE, Olympia, 98501</div>

                  <div style="margin-top: 1.1em">Dance lesson 7-8 p.m.</div>
                  <div>Frog &amp; Henry until 10 p.m.</div>
                  <p>Suggested donation is $10-20 but come dance at any price.</p>
               </div>
            </section>

            <!--
            <section>
               <h2>Upcoming Swing Dance Lessons</h2>
               <noscript>
                  <h4>Regarding JavaScript</h4>
                  <p>Thanks for browsing the web without JavaScript. Our site
                     uses JavaScript on this page, along with 3rd-party libraries
                     hosted on cdn.jsdelivr.net and unpkg.com, to display our
                     schedule.</p>

                  <p>When we have a super cool site, this will no longer be
                     the case, but for now that's where we're at. Please let
                     us know if you have any questions about our tech.</p>

                  <p>&ndash;Philip</p>
               </noscript>

               <div class="course" v-for="course in courses" v-cloak>
                  <h4>{{course['Title']}}</h4>

                  <p style="white-space: pre-wrap;">{{course['Description']}}</p>

                  <div>With: {{course['Instructors']}}</div>
                  <div>Dance format: {{course['Dance Format']}}</div>
                  <div>How to attend: {{course['How to Register']}}</div>

                  <div class="schedule" style="margin-top: 1.1em">
                     <div>{{course['Dates Description']}}</div>
                     <div>{{course['Time Description']}}</div>      
                  </div>

                  <div class="venue" style="margin-top: 1.1em">
                     <div>{{course['Venue']['Name']}}</div>
                     <div>{{course['Venue']['Street Address']}}</div>
                     <div>{{course['Venue']['City']}}, 
                           {{course['Venue']['State']}}
                           {{course['Venue']['Zip']}}</div>
                  </div>

                  <p>Hosted by {{course['Organization']}}</p>
               </div>
            </section>
         -->

            <section class="contact">
               <h2>Keep in touch</h2>

               <div>
                  <div style="margin-top: 2em">With Meetup, you will be emailed when we share new events. It's also a decent way to reach us. On Instagram we're <a href="https://www.instagram.com/swingcoop/">@swingcoop</a>.</div>

                  <div class="proto-nav-panel">
                     <a class="button-link" href="https://www.meetup.com/Swing-Dance-Cooperative/">Meetup</a>
                     <a class="button-link" href="https://www.instagram.com/swingcoop/">Instagram</a>
                  </div>
               </div>
            </section>

            <section class="teachers">
               <h2>Swing Dance Cooperative Staff</h2>
               <h4>Gabrielle</h4>

               <div class="bio">
                  <div class="content">
                     <p>Dancing has been part of her life for as long as she can remember. From little pink slippers to her suede soled heels, expressing herself through dance is one of her greatest passions. Her dance philosophy is that as long as you're smiling, you're doing something right.</p>

                     <div class="photo">
                        <img src="./img/gabrielle-bio.jpg"/>
                     </div>

                     <p>With over 15 years of experience, Gabrielle has been teaching in Washington and learning all over the States. Despite knowing many styles of dance, Lindy hop is her first love. The pure energy of Lindy is hard to match!</p>

                     <p>She lives for creating solid connections on the dance floor. Her favorite move is a well-executed outside turn, simple but so good!</p>
                  </div>
                  <div class="photo-lg">
                     <img src="./img/gabrielle-bio.jpg"/>
                  </div>
               </div>

               <h4>Philip</h4>
               <div class="bio">
                  <div class="content">
                     <p>
                        He took his first dance class to confront his greatest 
                        social fear, dancing in a public space. Philip is a co-founder 
                        of the Corvallis Swing Dance Society, where, among other things,
                        he developed their class
                        curriculum. He has taught for over 10 years, helping thousands 
                        of people discover swing dance in that time.
                     </p>

                     <div class="photo">
                        <img src="./img/philip-bio.jpg"/>
                     </div>

                     <p>
                        Philip loves old jazz, and the people who created it. He enjoys creating spaces where people feel comfortable expressing themselves, and his favorite move is hopping around.
                     </p>
                  </div>
                  <div class="photo-lg">
                     <img src="./img/philip-bio.jpg"/>
                  </div>
               </div>
            </section>

            <section class="recommendations">
               <h2>Recommendations</h2>

               <p>If you're wondering if these classes are for you, they probably are. I mean, you're
                  reading about swing dancing on the internet. Let us know if you have any questions.</p>

               <p>Here's an example of Lindy hop from Denver in 2013:</p>

               <iframe width="100%" height="315" src="https://www.youtube-nocookie.com/embed/FRIlMpVOH7k?rel=0" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe>
            </section>
         </div>
      </div>

      <section class="cooperative">
         <div class="column">
            <h1 class="for-desktop">Cooperative</h1>
            <h1 class="for-phone">About the co-op</h1>
            <p>We're a cooperative, and we identify with the 
               <a href="https://www.ica.coop/en/whats-co-op/co-operative-identity-values-principles">cooperative movement</a> and its values.</p>

            <div class="proto-nav-panel">
               <a class="button-link" href="/events">Events</a>
               <a class="button-link" href="/mission">Mission</a>
               <a class="button-link" href="/contact">Contact us</a>
            </div>

            <div class="close">
               <div class="name">The Swing Dance Cooperative</div>
               <div>Olympia, Washington.</div> 

               <img src="./img/rings.png" class="rings"/>
            </div>
         </div>
      </section>
   </div>
   <script>
new Vue({
   el: '#app',
   data: {
      courses: null,
      name: null,
      course: null,
      role: null,
      zip: null,
      email: null,
      comments: null,
      agreed: null,
      submitted: false,
      error: false,
      sending: false,
      rsvpPressed: false,
      hour: new Date().getHours(),
      starterKitReservations: null,
      eventType: null
   },
   computed: {
      greeting() {
         if (this.hour < 3)
            return "evening"
         if (this.hour < 6) 
            return "... morning?"
         if (this.hour < 12)
            return "morning"
         if (this.hour < 17)
            return "afternoon"
         return "evening"
      },
      needAgreement() {
         return this.rsvpPressed && !this.agreed;
      },
      reservations() {
         if (!this.starterKitReservations)
            return [];

         return this.starterKitReservations.map(x => {
            let role = x.Role ? x.Role.replace(" - Waitlist","") : 'Lead';
            return {
               role: role,
               'class': this.classes[role],
               waitlist: x.Role ? x.Role.includes("Waitlist") : false
            }
         });
      },
      followValue() {
         return "Follow" + (this.isNewFollowWaitlisted ? ' - Waitlist' : '');
      },
      leadValue() {
         return "Lead" + (this.isNewLeadWaitlisted ? ' - Waitlist' : '');
      },
      anyValue() {
         return "Any" + (this.isClassFull ? ' - Waitlist' : '');
      },
      follows() {
         return this.reservationsByRole('Follow').length;
      },
      leads() {
         return this.reservationsByRole('Lead').length;
      },
      anys() {
         return this.reservationsByRole('Any').length;
      },
      isClassFull() {
         return this.follows + this.leads + this.anys >= 20;
      },
      isNewFollowWaitlisted() {
         return ((this.follows >= 5) && this.leads + this.anys < this.follows) 
            || this.isClassFull
            || this.reservations.filter(x => x.role === 'Follow' && x.waitlist).length > 0;
      },
      isNewLeadWaitlisted() {
         return ((this.leads >= 5) && this.follows + this.anys < this.leads) 
            || this.isClassFull
            || this.reservations.filter(x => x.role === 'Lead' && x.waitlist).length > 0;
      },
      classes() {
         var val = {};
         if (!this.starterKitReservations)
            return val;

         return {
            'Follow': 'role1',
            'Lead': 'role2'
         };
      }
   },
   methods: {
      rsvp: function () {
         this.rsvpPressed = true;
         if (this.needAgreement) {
            return;
         }
         this.sending = true;
         var data = {
            name: this.name,
            course: 'Balboa',
            role: this.role,
            zip: this.zip,
            email: this.email,
            comments: this.comments,
         };
         axios.post('/api/reservations', data)
         .then(() => {
            this.submitted = true;
            this.sending = false;
            // console.log(data);
         })
         .catch(() => {
            this.error = true;
            this.sending = false;
         });
      },
      shuffle(ok) {
         let a = ok.slice();
         for (let i = a.length - 1; i > 0; i--) {
           const j = Math.floor(Math.random() * (i + 1));
           [a[i], a[j]] = [a[j], a[i]];
         }
         return a;
      },
      reservationsByRole(role) {
         return this.reservations.filter(x => x.role === role && !x.waitlist);
      }
   },
   created() {
      // axios.get('/api/reservations/current').then(res => {
      //    this.starterKitReservations = this.shuffle(res.data);
      // });

      axios.get("/api/courses").then(res => {
         this.courses = res.data;
      });
   }
})
</script>

</body>
</html>